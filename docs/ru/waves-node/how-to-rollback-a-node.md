# Откатить ноду Waves

**Откатите** ноду для удаления блоков после заданной высоты. Откат позволяет быстро сбросить несколько блоков, чтобы восстановить ноду не загружая базу данных блокчейн целиком в случае обнаружения форка.

С настройками по умолчанию, можно сделать откат в следующем случае: **можно откатить не более чем к 2000 блоков**. Используйте команжу `POST /debug/rollback` с **API ключом** \(Подробнее по ссылке [Waves Full Node API](https://nodes.wavesplatform.com/api-docs/index.html#!/debug/rollback)\). Например:

```js
{
  "rollbackTo": 1057490,
  "returnTransactionsToUtx": false
}
```

Если вам необходимо откатить более 2000 блоков, следуйте инструкциям, приведенным в статье [Загрузить блокчейн Waves](/ru/waves-node/options-for-getting-actual-blockchain) для загрузки актуального блокчейна.

Используйте утилиту [Chaincmp](https://github.com/wavesplatform/gowaves/releases/tag/v0.1.2) для сравнения блокчейна вашей ноды и других нод.

## Основные проблемы при откате ноды

Если пользователь запрашивает откат через **curl/swagger** и получает ошибку **error 503**, это не значит, что запрос не обрабатывается (это тайм-аут процесса). Чтобы проверить, производит ли нода обработку, убедитесь в том, что состояние ноды не меняется (проверкой статуса, убедитесь что высота блоков не меняется) после того, как начат откат. Потребуется некоторое время, чтобы снова начать синхронизацию из желаемой локации.
Нода может обработать откат до 2000 блоков без перезапуска, поэтому, если ваша нода по какой-то причине оказалась на форке, нужно обязательно её как можно скорее откатить, чтобы не пришлось восстанавливать состояние более долгими методами.

**Примечание**: Предел блоков по умолчанию `2000` можно изменить с помощью параметра `max-rollback` в файле конфигурации ноды. Параметр позволяет изменить длину цепочки блоков, которая может быть сброшена в случае обнаружения форка. Если нода находится на форке с более низким счетом, он попытается переключиться на другой форк, чтобы сделать так, чтобы нода откатила несколько блоков. Если обнаруженный форк длиннее указанного числа, нода не переключится на другой форк, даже если его оценка выше. Подробнее см. в статье [Конфигурация ноды](/ru/waves-node/node-configuration).
