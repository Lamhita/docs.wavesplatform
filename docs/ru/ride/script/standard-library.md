# Стандартная библиотека

**Стандартная библиотека** — множество встроенных [функций](/ru/ride/functions/built-in-functions), [структур](/ru/ride/structures/readme) и [переменных](/ru/ride/variables/built-in-variables) [контекста скрипта](/ru/ride/script/script-context).

Версия используемой в скрипте Стандартной библиотеки задается [директивой](/ru/ride/script/directives) `STDLIB_VERSION`.

При разработки приложений рекомендуется использовать 3 версию Стандартной библиотеки; версии 1 и 2 нужны для обратной совместимости.

Стандартная библиотека версии 4 доступна начиная с версии ноды 1.2.0 после активации фичи №&nbsp;15 “Ride V4, VRF, Protobuf, Failed transactions”. Версии 1.2.x в настоящее время работают только на [Stagenet](/ru/blockchain/blockchain-network/stage-network).

Изменения в версиях представлены в таблице.

| # | Версия 3 | Версия 4 |
| :--- | :--- | :--- |
| Скрипт | **Добавлены:**<br>• [dApp-скрипт](/ru/ride/script-types/dapp-script)<br>• [Директивы](/ru/ride/script/directives)<br>• [Аннотации](/ru/ride/functions/annotations)<br>• [Пользовательские функции](/ru/ride/functions) | |
| [Типы данных](/ru/ride/data-types) | **Добавлены:**<br>• [List](/ru/ride/data-types/list)| |
| [Встроенные переменные](/ru/ride/variables/built-in-variables) | **Добавлены:**<br>• this<br>• lastBlock<br>• nil<br>• Типы округления: CEILING, DOWN, FLOOR и т.д.<br>• Обозначения алгоритмов хеширования: NOALG, MD5, SHA1 и т.д. | |
| [Структуры](/ru/ride/structures) | **Добавлены:**<br>Действия скрипта:<br>• [DataEntry](/ru/structures/script-actions/data-entry)<br>• [ScriptTransfer](/ru/structures/script-actions/script-transfer)<br>Результаты скрипта:<br>• [ScriptResult](/ru/structures/script-results/script-result)<br>• [TransferSet](/ru/structures/script-results/transfer-set)<br>• [WriteSet](/ru/structures/script-results/write-set)<br>Общие структуры:<br>• [Asset](/ru/structures/common-structures/asset)<br>• [AttachedPayment](/ru/structures/common-structures/attached-payment)<br>• [BlockInfo](/ru/structures/common-structures/block-info)<br>• [Invocation](/ru/structures/common-structures/invocation)<br>Структуры транзакций:<br>• [InvokeScriptTransaction](/ru/structures/transaction-structures/invoke-script-transaction) | **Добавлены:**<br>Действия скрипта:<br>• [BinaryEntry](/ru/structures/script-actions/binary-entry)<br>• [BooleanEntry](/ru/structures/script-actions/boolean-entry)<br>• [IntegerEntry](/ru/structures/script-actions/integer-entry)<br>• [StringEntry](/ru/structures/script-actions/string-entry)<br>• [DeleteEntry](/ru/structures/script-actions/delete-entry)<br>• [Issue](/ru/structures/script-actions/issue)<br>• [Reissue](/ru/structures/script-actions/reissue)<br>• [Burn](/ru/structures/script-actions/burn)<br>• [SponsorFee](/ru/structures/script-actions/sponsor-fee)<br>Общие структуры:<br>• [BalanceDetails](/ru/structures/common-structures/balance-details)<br>Структуры транзакций:<br>• [UpdateAssetInfoTransaction](/ru/structures/transaction-structures/update-asset-info-transaction)<br>**Изменены:**<br>Общие структуры:<br>• [Asset](/ru/structures/common-structures/asset)<br>• [BlockInfo](/ru/structures/common-structures/block-info)<br>• [Invocation](/ru/structures/common-structures/invocation)<br>Структуры транзакций:<br>• [DataTransaction](/ru/structures/transaction-structures/data-transaction)<br>• [InvokeScriptTransaction](/ru/structures/transaction-structures/invoke-script-transaction)<br>• [IssueTransaction](/ru/structures/transaction-structures/issue-transaction)<br>• [MassTransferTransaction](/ru/structures/transaction-structures/mass-transfer-transaction)<br>• [TransferTransaction](/ru/structures/transaction-structures/transfer-transaction)<br>**Удалены:**<br>• DataEntry<br>• ScriptResult<br>• TransferSet<br>• WriteSet |
| [Встроенные функции](/ru/ride/functions/built-in-functions) | **Добавлены:**<br>Функции блокчейна:<br>• [assetInfo](/ru/ride/functions/built-in-functions/blockchain-functions#assetinfo)<br>• [blockInfoByHeight](/ru/ride/functions/built-in-functions/blockchain-functions#blockinfobyheight)<br>• [transferTransactionById](/ru/ride/functions/built-in-functions/blockchain-functions#transfertransactionbyid)<br>Функции конвертации:<br>• [parseInt](/ru/ride/functions/built-in-functions/converting-functions#parse-int)<br>• [parseIntValue](/ru/ride/functions/built-in-functions/converting-functions#parse-int-value)<br>• [toInt](/ru/ride/functions/built-in-functions/converting-functions#toint-bytevector-int)<br>• [toUtf8String](/ru/ride/functions/built-in-functions/converting-functions#toutf8string-bytevector-string)<br>• [toString(Address)](/ru/ride/functions/built-in-functions/converting-functions#tostring-address-string)<br>Функции кодирования:<br>• [toBase16String](/ru/ride/functions/built-in-functions/encoding-functions#to-base-16-string)<br>Функции декодирования:<br>• [fromBase16String](/ru/ride/functions/built-in-functions/decoding-functions#frombase16string-string-bytevector)<br>Функции хеширования: <br>Математические функции:<br>• [log](/ru/ride/functions/built-in-functions/math-functions#log)<br>• [pow](/ru/ride/functions/built-in-functions/math-functions#pow)<br>Функции строки:<br>• [indexOf](/ru/ride/functions/built-in-functions/string-functions#indexofstring-stringintunit)<br>• [lastIndexOf](/ru/ride/functions/built-in-functions/string-functions#lastindexofstring-stringintunit)<br>• [split](/ru/ride/functions/built-in-functions/string-functions#split)<br>Функции объединения:<br>• [value](/ru/ride/functions/built-in-functions/union-functions#value)<br>• [valueOrErrorMessage](/ru/ride/functions/built-in-functions/union-functions#valueorerrormessage-t-unit-string-t)<br>Функции верификации:<br>• [checkMerkleProof](/ru/ride/functions/built-in-functions/verification-functions#checkmerkleproof)<br>• [rsaVerify](/ru/ride/functions/built-in-functions/verification-functions#rsaverify)<br>**Удалены:**<br>• transactionById | **Добавлены:**<br>Функции блокчейна:<br>• [calculateAssetId](/ru/ride/functions/built-in-functions/blockchain-functions#calculate)<br>Функции конвертации:<br>• [transferTransactionFromProto](/ru/ride/functions/built-in-functions/converting-functions#transfertransactionfromproto)<br>Математические функции:<br>• [median](/ru/ride/functions/built-in-functions/math-functions#median)<br>Функции строки:<br>• [contains](/ru/ride/functions/built-in-functions/string-functions#contains)<br>Функции объединения:<br>• [valueOrElse](/ru/ride/functions/built-in-functions/union-functions#valueOrElse)<br>Функции верификации:<br>• [createMerkleRoot](/ru/ride/functions/built-in-functions/verification-functions##createmerkleroot)<br>• [groth16verify](/ru/ride/functions/built-in-functions/verification-functions#groth16verify)<br>**Удалены:**<br>• checkMerkleProof |
| [Операторы](/ru/ride/operators) | | **Добавлены:**<br>• [:+](/ru/ride/data-types/list)<br>• [++](/ru/ride/data-types/list) |
| Изменения сложности | • Оператор [-](/ru/ride/operators/#арифметические-операторы): 9 → 1<br>• Оператор [!](/ru/ride/operators/#унарные-операторы): 11 → 1<br>• Оператор [!=](/ru/ride/operators/#операторы-равенства): 26 → 1<br>• [throw](/ru/ride/functions/built-in-functions/exception-functions): 2 → 1<br>• [isDefined](/ru/ride/functions/built-in-functions/union-functions#isDefined): 35 → 1<br>Максимальная сложность скрипта — 4000 | • [blake2b256](/ru/ride/functions/built-in-functions/hashing-functions#blake2b256): 10 → 200<br>• [keccak256](/ru/ride/functions/built-in-functions/hashing-functions#keccak256): 10 → 200<br>• [sha256](/ru/ride/functions/built-in-functions/hashing-functions#sha256): 10 → 200<br>• [rsaVerify](/ru/ride/functions/built-in-functions/verification-functions#rsaverify): 300 → 1000<br> • [sigVerify](/ru/ride/functions/built-in-functions/verification-functions#sigverify): 100 → 200<br>• Добавлены функции `blake2b256_<N>Kb`, `keccak256_<N>Kb`, `sha256_<N>Kb`, `rsaVerify_<N>Kb`, `sigVerify_<N>Kb` с различной сложностью сложностью в зависимости от размера аргумента<br>Максимальная сложность скрипта аккаунта и функции-верификатора скрипта dApp —  3000.<br>Максимальная сложность скрипта ассета и вызываемой функции скрипта dApp — 4000 |
| Проверка [подтверждений](/ru/blockchain/transaction/transaction-proof) при наличии [функции-верификатора](/ru/ride/functions/verifier-function) dApp | Дополнтельная проверка не выполняется | Первое подтверждение всегда должно быть подписью отправителя |